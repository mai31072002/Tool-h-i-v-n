{"ast":null,"code":"import history from \"@history\";\nimport _ from \"lodash\";\nimport jwtService from \"app/services/jwt\";\nexport const SET_USER_DATA = \"[USER] SET DATA\";\nexport const REMOVE_USER_DATA = \"[USER] REMOVE DATA\";\nexport const USER_LOGGED_OUT = \"[USER] LOGGED OUT\";\n\n/**\r\n * Set User Data\r\n */\nexport function setUserData(user) {\n  return dispatch => {\n    dispatch({\n      type: SET_USER_DATA,\n      payload: {\n        data: user.data,\n        role: [user.role]\n      }\n    });\n  };\n}\n\n/**\r\n * Update User Settings\r\n */\nexport function updateUserSettings(settings) {\n  return (dispatch, getState) => {\n    const oldUser = getState().auth.user;\n    const user = _.merge({}, oldUser, {\n      data: {\n        settings\n      }\n    });\n    updateUserData(user, dispatch);\n    return dispatch(setUserData(user));\n  };\n}\n\n/**\r\n * Update User Shortcuts\r\n */\nexport function updateUserShortcuts(shortcuts) {\n  return (dispatch, getState) => {\n    const {\n      user\n    } = getState().auth;\n    const newUser = {\n      ...user,\n      data: {\n        ...user.data,\n        shortcuts\n      }\n    };\n    updateUserData(newUser, dispatch);\n    return dispatch(setUserData(newUser));\n  };\n}\n\n/**\r\n * Remove User Data\r\n */\nexport function removeUserData() {\n  return {\n    type: REMOVE_USER_DATA\n  };\n}\n\n/**\r\n * Logout\r\n */\nexport function logoutUser() {\n  return (dispatch, getState) => {\n    const {\n      user\n    } = getState().auth;\n    if (!user.role || user.role.length === 0) {\n      // is guest\n      return null;\n    }\n    history.push({\n      pathname: \"/\"\n    });\n    jwtService.logout();\n    return dispatch({\n      type: USER_LOGGED_OUT\n    });\n  };\n}\n\n/**\r\n * Update User Data\r\n */\n// eslint-disable-next-line no-unused-vars\nfunction updateUserData(user, dispatch) {\n  if (!user.role || user.role.length === 0) {\n    return;\n  }\n  jwtService.updateUserData(user).then(() => {}).catch(() => {});\n}","map":{"version":3,"names":["history","_","jwtService","SET_USER_DATA","REMOVE_USER_DATA","USER_LOGGED_OUT","setUserData","user","dispatch","type","payload","data","role","updateUserSettings","settings","getState","oldUser","auth","merge","updateUserData","updateUserShortcuts","shortcuts","newUser","removeUserData","logoutUser","length","push","pathname","logout","then","catch"],"sources":["D:/project-individual/reactjs/tool-hai-van-frontend/src/app/auth/store/actions/user.action.js"],"sourcesContent":["import history from \"@history\";\r\nimport _ from \"lodash\";\r\nimport jwtService from \"app/services/jwt\";\r\n\r\nexport const SET_USER_DATA = \"[USER] SET DATA\";\r\nexport const REMOVE_USER_DATA = \"[USER] REMOVE DATA\";\r\nexport const USER_LOGGED_OUT = \"[USER] LOGGED OUT\";\r\n\r\n/**\r\n * Set User Data\r\n */\r\nexport function setUserData(user) {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: SET_USER_DATA,\r\n      payload: {\r\n        data: user.data,\r\n        role: [user.role],\r\n      },\r\n    });\r\n  };\r\n}\r\n\r\n/**\r\n * Update User Settings\r\n */\r\nexport function updateUserSettings(settings) {\r\n  return (dispatch, getState) => {\r\n    const oldUser = getState().auth.user;\r\n    const user = _.merge({}, oldUser, { data: { settings } });\r\n\r\n    updateUserData(user, dispatch);\r\n\r\n    return dispatch(setUserData(user));\r\n  };\r\n}\r\n\r\n/**\r\n * Update User Shortcuts\r\n */\r\nexport function updateUserShortcuts(shortcuts) {\r\n  return (dispatch, getState) => {\r\n    const { user } = getState().auth;\r\n    const newUser = {\r\n      ...user,\r\n      data: {\r\n        ...user.data,\r\n        shortcuts,\r\n      },\r\n    };\r\n\r\n    updateUserData(newUser, dispatch);\r\n\r\n    return dispatch(setUserData(newUser));\r\n  };\r\n}\r\n\r\n/**\r\n * Remove User Data\r\n */\r\nexport function removeUserData() {\r\n  return {\r\n    type: REMOVE_USER_DATA,\r\n  };\r\n}\r\n\r\n/**\r\n * Logout\r\n */\r\nexport function logoutUser() {\r\n  return (dispatch, getState) => {\r\n    const { user } = getState().auth;\r\n\r\n    if (!user.role || user.role.length === 0) {\r\n      // is guest\r\n      return null;\r\n    }\r\n\r\n    history.push({\r\n      pathname: \"/\",\r\n    });\r\n\r\n    jwtService.logout();\r\n\r\n    return dispatch({\r\n      type: USER_LOGGED_OUT,\r\n    });\r\n  };\r\n}\r\n\r\n/**\r\n * Update User Data\r\n */\r\n// eslint-disable-next-line no-unused-vars\r\nfunction updateUserData(user, dispatch) {\r\n  if (!user.role || user.role.length === 0) {\r\n    return;\r\n  }\r\n\r\n  jwtService\r\n    .updateUserData(user)\r\n    .then(() => {})\r\n    .catch(() => {});\r\n}\r\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,UAAU;AAC9B,OAAOC,CAAC,MAAM,QAAQ;AACtB,OAAOC,UAAU,MAAM,kBAAkB;AAEzC,OAAO,MAAMC,aAAa,GAAG,iBAAiB;AAC9C,OAAO,MAAMC,gBAAgB,GAAG,oBAAoB;AACpD,OAAO,MAAMC,eAAe,GAAG,mBAAmB;;AAElD;AACA;AACA;AACA,OAAO,SAASC,WAAWA,CAACC,IAAI,EAAE;EAChC,OAAQC,QAAQ,IAAK;IACnBA,QAAQ,CAAC;MACPC,IAAI,EAAEN,aAAa;MACnBO,OAAO,EAAE;QACPC,IAAI,EAAEJ,IAAI,CAACI,IAAI;QACfC,IAAI,EAAE,CAACL,IAAI,CAACK,IAAI;MAClB;IACF,CAAC,CAAC;EACJ,CAAC;AACH;;AAEA;AACA;AACA;AACA,OAAO,SAASC,kBAAkBA,CAACC,QAAQ,EAAE;EAC3C,OAAO,CAACN,QAAQ,EAAEO,QAAQ,KAAK;IAC7B,MAAMC,OAAO,GAAGD,QAAQ,CAAC,CAAC,CAACE,IAAI,CAACV,IAAI;IACpC,MAAMA,IAAI,GAAGN,CAAC,CAACiB,KAAK,CAAC,CAAC,CAAC,EAAEF,OAAO,EAAE;MAAEL,IAAI,EAAE;QAAEG;MAAS;IAAE,CAAC,CAAC;IAEzDK,cAAc,CAACZ,IAAI,EAAEC,QAAQ,CAAC;IAE9B,OAAOA,QAAQ,CAACF,WAAW,CAACC,IAAI,CAAC,CAAC;EACpC,CAAC;AACH;;AAEA;AACA;AACA;AACA,OAAO,SAASa,mBAAmBA,CAACC,SAAS,EAAE;EAC7C,OAAO,CAACb,QAAQ,EAAEO,QAAQ,KAAK;IAC7B,MAAM;MAAER;IAAK,CAAC,GAAGQ,QAAQ,CAAC,CAAC,CAACE,IAAI;IAChC,MAAMK,OAAO,GAAG;MACd,GAAGf,IAAI;MACPI,IAAI,EAAE;QACJ,GAAGJ,IAAI,CAACI,IAAI;QACZU;MACF;IACF,CAAC;IAEDF,cAAc,CAACG,OAAO,EAAEd,QAAQ,CAAC;IAEjC,OAAOA,QAAQ,CAACF,WAAW,CAACgB,OAAO,CAAC,CAAC;EACvC,CAAC;AACH;;AAEA;AACA;AACA;AACA,OAAO,SAASC,cAAcA,CAAA,EAAG;EAC/B,OAAO;IACLd,IAAI,EAAEL;EACR,CAAC;AACH;;AAEA;AACA;AACA;AACA,OAAO,SAASoB,UAAUA,CAAA,EAAG;EAC3B,OAAO,CAAChB,QAAQ,EAAEO,QAAQ,KAAK;IAC7B,MAAM;MAAER;IAAK,CAAC,GAAGQ,QAAQ,CAAC,CAAC,CAACE,IAAI;IAEhC,IAAI,CAACV,IAAI,CAACK,IAAI,IAAIL,IAAI,CAACK,IAAI,CAACa,MAAM,KAAK,CAAC,EAAE;MACxC;MACA,OAAO,IAAI;IACb;IAEAzB,OAAO,CAAC0B,IAAI,CAAC;MACXC,QAAQ,EAAE;IACZ,CAAC,CAAC;IAEFzB,UAAU,CAAC0B,MAAM,CAAC,CAAC;IAEnB,OAAOpB,QAAQ,CAAC;MACdC,IAAI,EAAEJ;IACR,CAAC,CAAC;EACJ,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA,SAASc,cAAcA,CAACZ,IAAI,EAAEC,QAAQ,EAAE;EACtC,IAAI,CAACD,IAAI,CAACK,IAAI,IAAIL,IAAI,CAACK,IAAI,CAACa,MAAM,KAAK,CAAC,EAAE;IACxC;EACF;EAEAvB,UAAU,CACPiB,cAAc,CAACZ,IAAI,CAAC,CACpBsB,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CACdC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;AACpB","ignoreList":[]},"metadata":{},"sourceType":"module"}