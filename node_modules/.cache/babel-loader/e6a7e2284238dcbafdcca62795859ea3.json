{"ast":null,"code":"import axios from \"axios\";\nimport apiConfig from \"../../../../configs/api.config\";\nimport jwt from \"../../../../services/jwt\";\nexport const FETCHED = \"FETCHED\";\nexport const FETCHING = \"FETCHING\";\nexport const ERROR = \"ERROR\";\nexport const UPDATE_PASSWORD = \"UPDATE_PASSWORD\";\nexport const RESET_UPDATE_PASSWORD = \"RESET_UPDATE_PASSWORD\";\nexport const getDataUserDetail = () => async dispatch => {\n  axios.defaults.headers.common.Authorization = `Bearer ${localStorage.getItem(apiConfig.accessTokenKey)}`;\n  dispatch({\n    type: FETCHING\n  });\n  try {\n    const res = await axios.post(\"/user/detail-user\");\n    dispatch({\n      type: FETCHED,\n      payload: res.data\n    });\n    console.log(\"res user detail :\", res);\n  } catch (error) {\n    if (error.response && error.response.status === 401) {\n      try {\n        let tokenNew = null;\n        if (!tokenNew) {\n          tokenNew = await jwt.signInWithToken();\n        }\n        axios.defaults.headers.common.Authorization = `Bearer ${tokenNew}`;\n        const res = await axios.post(\"/user/detail-user\");\n        dispatch({\n          type: FETCHED,\n          payload: res.data\n        });\n      } catch (refreshError) {\n        dispatch({\n          type: ERROR,\n          payload: refreshError\n        });\n      }\n    } else {\n      dispatch({\n        type: ERROR,\n        payload: error\n      });\n      throw error;\n    }\n  }\n};\nexport const updatePassword = dataBody => async dispatch => {\n  dispatch({\n    type: FETCHING\n  });\n  axios.defaults.headers.common.Authorization = `Bearer ${localStorage.getItem(apiConfig.accessTokenKey)}`;\n  try {\n    const res = await axios.post(\"/user/update-password\", dataBody);\n    dispatch({\n      type: UPDATE_PASSWORD,\n      payload: res.data\n    });\n    console.log(\"res update password :\", res);\n  } catch (error) {\n    if (error.response && error.response.status === 401) {\n      try {\n        let tokenNew = null;\n        if (!tokenNew) {\n          tokenNew = await jwt.signInWithToken();\n        }\n        axios.defaults.headers.common.Authorization = `Bearer ${tokenNew}`;\n      } catch (refreshError) {\n        dispatch({\n          type: ERROR,\n          payload: refreshError\n        });\n      }\n    } else {\n      dispatch({\n        type: ERROR,\n        payload: error\n      });\n      throw error;\n    }\n  }\n};\nexport const resetUpdatePassword = () => async dispatch => {\n  dispatch({\n    type: FETCHING\n  });\n  try {\n    dispatch({\n      type: RESET_UPDATE_PASSWORD\n    });\n    console.log(\"check !!!\");\n  } catch (error) {\n    console.log(error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","apiConfig","jwt","FETCHED","FETCHING","ERROR","UPDATE_PASSWORD","RESET_UPDATE_PASSWORD","getDataUserDetail","dispatch","defaults","headers","common","Authorization","localStorage","getItem","accessTokenKey","type","res","post","payload","data","console","log","error","response","status","tokenNew","signInWithToken","refreshError","updatePassword","dataBody","resetUpdatePassword"],"sources":["D:/project-individual/reactjs/tool-hai-van-frontend/src/app/main/account/store/actions/account.action.js"],"sourcesContent":["import axios from \"axios\";\r\nimport apiConfig from \"../../../../configs/api.config\";\r\nimport jwt from \"../../../../services/jwt\";\r\n\r\nexport const FETCHED = \"FETCHED\";\r\nexport const FETCHING = \"FETCHING\";\r\nexport const ERROR = \"ERROR\";\r\nexport const UPDATE_PASSWORD = \"UPDATE_PASSWORD\";\r\nexport const RESET_UPDATE_PASSWORD = \"RESET_UPDATE_PASSWORD\";\r\n\r\nexport const getDataUserDetail = () => async (dispatch) => {\r\n  axios.defaults.headers.common.Authorization = `Bearer ${localStorage.getItem(\r\n    apiConfig.accessTokenKey\r\n  )}`;\r\n\r\n  dispatch({ type: FETCHING });\r\n\r\n  try {\r\n    const res = await axios.post(\"/user/detail-user\");\r\n    dispatch({\r\n      type: FETCHED,\r\n      payload: res.data,\r\n    });\r\n    console.log(\"res user detail :\", res);\r\n  } catch (error) {\r\n    if (error.response && error.response.status === 401) {\r\n      try {\r\n        let tokenNew = null;\r\n        if (!tokenNew) {\r\n          tokenNew = await jwt.signInWithToken();\r\n        }\r\n        axios.defaults.headers.common.Authorization = `Bearer ${tokenNew}`;\r\n        const res = await axios.post(\"/user/detail-user\");\r\n        dispatch({\r\n          type: FETCHED,\r\n          payload: res.data,\r\n        });\r\n      } catch (refreshError) {\r\n        dispatch({\r\n          type: ERROR,\r\n          payload: refreshError,\r\n        });\r\n      }\r\n    } else {\r\n      dispatch({\r\n        type: ERROR,\r\n        payload: error,\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\nexport const updatePassword = (dataBody) => async (dispatch) => {\r\n  dispatch({ type: FETCHING });\r\n  axios.defaults.headers.common.Authorization = `Bearer ${localStorage.getItem(\r\n    apiConfig.accessTokenKey\r\n  )}`;\r\n  try {\r\n    const res = await axios.post(\"/user/update-password\", dataBody);\r\n    dispatch({\r\n      type: UPDATE_PASSWORD,\r\n      payload: res.data,\r\n    });\r\n    console.log(\"res update password :\", res);\r\n  } catch (error) {\r\n    if (error.response && error.response.status === 401) {\r\n      try {\r\n        let tokenNew = null;\r\n        if (!tokenNew) {\r\n          tokenNew = await jwt.signInWithToken();\r\n        }\r\n        axios.defaults.headers.common.Authorization = `Bearer ${tokenNew}`;\r\n      } catch (refreshError) {\r\n        dispatch({\r\n          type: ERROR,\r\n          payload: refreshError,\r\n        });\r\n      }\r\n    } else {\r\n      dispatch({\r\n        type: ERROR,\r\n        payload: error,\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n};\r\nexport const resetUpdatePassword = () => async (dispatch) => {\r\n  dispatch({ type: FETCHING });\r\n  try {\r\n    dispatch({ type: RESET_UPDATE_PASSWORD });\r\n    console.log(\"check !!!\");\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}